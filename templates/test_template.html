<!DOCTYPE html>
<html>
<head>
    <title>Middleware Test</title>
</head>
<body>
    <h1>Тест работы Middleware</h1>
    
    <div style="background: #f0f0f0; padding: 20px; margin: 20px 0;">
        <h2>Данные из view:</h2>
        <p>test_value: {{ test_value }}</p>
        
        <h2>Данные из middleware:</h2>
        {% if base_news %}
            <p>Количество новостей: {{ base_news|length }}</p>
            {% for news in base_news %}
            <div style="margin: 10px; padding: 10px; border: 1px solid #ccc;">
                <h3>{{ news.title }}</h3>
                <p>{{ news.text }}</p>
                <small>{{ news.reporter }}, {{ news.created_at|date:"d.m.Y H:i" }}</small>
            </div>
            {% endfor %}
        {% else %}
            <p style="color: red;">НОВОСТИ НЕ НАЙДЕНЫ В КОНТЕКСТЕ!</p>
        {% endif %}
    </div>
</body>
</html>